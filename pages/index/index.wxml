<!--pages/index/index.wxml-->
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <view class="header-title">æˆ‘çš„è€ Baby</view>
    <view class="header-subtitle">SENIOR PET CARE SYSTEM</view>
  </view>

  <!-- å® ç‰©åˆ—è¡¨ -->
  <view class="pet-list" wx:if="{{!isEmpty}}">
    <view class="pet-card" wx:for="{{pets}}" wx:key="id" bindtap="onPetTap" data-id="{{item.id}}">
      <!-- å® ç‰©å¤´åƒ -->
      <view class="pet-avatar-wrap">
        <image
          class="pet-avatar"
          src="{{item.avatar}}"
          mode="aspectFill"
          wx:if="{{item.avatar}}"
        />
        <view class="pet-avatar-placeholder" wx:else>ğŸ•</view>
        <view class="pet-age-tag">{{item.age}}å²</view>
      </view>

      <!-- å® ç‰©ä¿¡æ¯ -->
      <view class="pet-info">
        <view class="pet-name">{{item.name || 'å®è´'}}</view>
        <view class="pet-breed">{{item.breedName || 'ä¼´ä¾£çŠ¬'}}</view>
        <view class="pet-weight">{{item.weight}}kg Â· {{item.gender === 'male' ? 'å°ç”·ç”Ÿ' : item.gender === 'female' ? 'å°å¥³ç”Ÿ' : 'æœªçŸ¥'}}</view>

        <!-- å¥åº·æ ‡ç­¾ -->
        <view class="pet-tags" wx:if="{{item.diseaseNames && item.diseaseNames.length > 0}}">
          <view class="health-tag" wx:for="{{item.diseaseNames}}" wx:for-item="disease" wx:for-index="diseaseIndex" wx:key="*this" wx:if="{{diseaseIndex < 2}}">
            {{disease}}
          </view>
          <view class="health-tag more" wx:if="{{item.diseaseNames.length > 2}}">+{{item.diseaseNames.length - 2}}</view>
        </view>
        <view class="pet-tags" wx:else>
          <view class="health-tag healthy" wx:if="{{item.isHealthComplete}}">èº«ä½“çŠ¶æ€è‰¯å¥½</view>
          <view class="health-tag warning" wx:else>å¾…è¡¥å……å¥åº·ä½“å¾</view>
        </view>
      </view>

      <!-- æ“ä½œæŒ‰é’® -->
      <view class="pet-actions" catchtap="">
        <view class="action-btn" catchtap="onViewRecipes" data-id="{{item.id}}">
          <text class="action-icon-emoji">ğŸ²</text>
          <text>é£Ÿè¡¥</text>
        </view>
        <view class="action-btn" catchtap="onEditHealth" data-id="{{item.id}}">
          <text class="action-icon-emoji">ğŸ¥</text>
          <text>è®°å½•</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:else>
    <view class="empty-icon-emoji">ğŸ•</view>
    <view class="empty-text">è®°å½•ä½ çš„è€å®è´</view>
    <view class="empty-hint">è®©æ•°å­—æŠ€æœ¯å¸®åŠ©ä½ ï¼Œä¸ºæ­¥å…¥è€å¹´çš„ä¼´ä¾£çŠ¬æä¾›æœ€ç»†è‡´çš„é²œç²®å…»æŠ¤</view>
    <button class="btn-primary mt-30" bindtap="onAddPet">
      + æˆ‘çš„è€ Baby
    </button>
  </view>

  <!-- æ·»åŠ æŒ‰é’® -->
  <view class="add-btn-wrap" wx:if="{{!isEmpty}}">
    <button class="add-btn" bindtap="onAddPet">
      <text class="add-icon">ï¼‹</text>
      <text>æ¥çº³è€å®è´</text>
    </button>
  </view>
</view>
