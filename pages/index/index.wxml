<!--pages/index/index.wxml-->
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <view class="header-title">æˆ‘çš„è€å®è´</view>
    <view class="header-subtitle">ç”¨çˆ±å®ˆæŠ¤æ¯ä¸€å¤©</view>
  </view>

  <!-- å® ç‰©åˆ—è¡¨ -->
  <view class="pet-list" wx:if="{{!isEmpty}}">
    <view class="pet-card" wx:for="{{pets}}" wx:key="id" bindtap="onPetTap" data-id="{{item.id}}">
      <!-- å® ç‰©å¤´åƒ -->
      <view class="pet-avatar-wrap">
        <image 
          class="pet-avatar" 
          src="{{item.avatar}}" 
          mode="aspectFill"
          wx:if="{{item.avatar}}"
        />
        <view class="pet-avatar-placeholder" wx:else>ğŸ•</view>
        <view class="pet-age-tag">{{item.age}}å²</view>
      </view>
      
      <!-- å® ç‰©ä¿¡æ¯ -->
      <view class="pet-info">
        <view class="pet-name">{{item.name || 'æœªå‘½å'}}</view>
        <view class="pet-breed">{{item.breedName || 'æœªçŸ¥å“ç§'}}</view>
        <view class="pet-weight">{{item.weight}}kg Â· {{item.gender === 'male' ? 'å…¬' : item.gender === 'female' ? 'æ¯' : 'æœªçŸ¥'}}</view>
        
        <!-- å¥åº·æ ‡ç­¾ -->
        <view class="pet-tags" wx:if="{{item.diseases && item.diseases.length > 0}}">
          <view class="health-tag" wx:for="{{item.diseases}}" wx:for-item="disease" wx:key="*this" wx:if="{{index < 2}}">
            {{disease}}
          </view>
          <view class="health-tag more" wx:if="{{item.diseases.length > 2}}">+{{item.diseases.length - 2}}</view>
        </view>
        <view class="pet-tags" wx:else>
          <view class="health-tag healthy">å¥åº·çŠ¶æ€è‰¯å¥½</view>
        </view>
      </view>

      <!-- æ“ä½œæŒ‰é’® -->
      <view class="pet-actions" catchtap="">
        <view class="action-btn" catchtap="onViewRecipes" data-id="{{item.id}}">
          <text class="action-icon-emoji">ğŸ²</text>
          <text>é£Ÿè°±</text>
        </view>
        <view class="action-btn" catchtap="onEditHealth" data-id="{{item.id}}">
          <text class="action-icon-emoji">ğŸ’Š</text>
          <text>å¥åº·</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:else>
    <view class="empty-icon-emoji">ğŸ•</view>
    <view class="empty-text">è¿˜æ²¡æœ‰æ·»åŠ å® ç‰©</view>
    <view class="empty-hint">æ·»åŠ ä½ çš„è€å®è´ï¼Œè·å–ä¸“å±é£Ÿè°±æ¨è</view>
  </view>

  <!-- æ·»åŠ æŒ‰é’® -->
  <view class="add-btn-wrap">
    <button class="add-btn" bindtap="onAddPet">
      <text class="add-icon">+</text>
      <text>æ·»åŠ å® ç‰©</text>
    </button>
  </view>
</view>
