<!--pages/recipe-list/recipe-list.wxml-->
<view class="container page-gradient-bg-pink">
  <!-- 顶部标题 -->
  <view class="page-header">
    <view class="header-title">智能食谱</view>
    <view class="header-subtitle">为您的爱宠定制营养方案</view>
  </view>

  <!-- 分类导航 -->
  <view class="category-bar">
    <scroll-view class="category-scroll" scroll-x enable-flex>
      <view
        class="category-pill {{activeCategory === item.id ? 'active' : ''}}"
        wx:for="{{categories}}"
        wx:key="id"
        data-id="{{item.id}}"
        bindtap="onCategoryTap"
      >{{item.name}}</view>
    </scroll-view>
  </view>

  <!-- 筛选提示 -->
  <view class="filter-tip" wx:if="{{currentPet && activeCategory === 'all' && !searchKey}}">
    <text class="filter-icon">🔍</text>
    <view class="filter-tip-content">
      <view class="filter-tip-title">智能推荐</view>
      <view class="filter-tip-desc">根据宠物健康档案，系统会为您推荐最适合的食谱</view>
    </view>
  </view>

  <!-- 食谱列表 -->
  <view class="recipe-list">
    <view
      class="recipe-card"
      wx:for="{{recipes}}"
      wx:key="id"
      data-id="{{item.id}}"
      bindtap="onRecipeTap"
    >
      <!-- 食谱图片 -->
      <view class="recipe-image-wrap">
        <image
          class="recipe-image"
          src="{{item.image}}"
          mode="aspectFill"
          wx:if="{{item.image}}"
        />
        <view class="recipe-image-placeholder" wx:else>🍲</view>
      </view>

      <!-- 食谱信息 -->
      <view class="recipe-body">
        <view class="recipe-title-row">
          <view class="recipe-name">{{item.name}}</view>
          <view class="recipe-arrow">›</view>
        </view>
        <view class="recipe-desc">{{item.description}}</view>

        <view class="recipe-meta">
          <view class="meta-item">
            <text class="meta-icon">⏱</text>
            <text>{{item.prepTime}}</text>
          </view>
          <view class="meta-item">
            <text class="meta-icon">📊</text>
            <text>{{item.difficulty}}</text>
          </view>
        </view>

        <view class="recipe-tags" wx:if="{{item.matchedDiseases && item.matchedDiseases.length > 0}}">
          <view class="recipe-tag" wx:for="{{item.matchedDiseases}}" wx:for-item="disease" wx:key="*this">
            适合{{disease}}
          </view>
        </view>
      </view>
    </view>

    <!-- 空状态 -->
    <view class="empty-state" wx:if="{{recipes.length === 0}}">
      <view class="empty-text">未找到匹配的食谱</view>
      <button class="clear-btn" bindtap="clearFilter">清除筛选</button>
    </view>
  </view>

  <!-- 底部占位 -->
  <view class="bottom-spacer"></view>
</view>
