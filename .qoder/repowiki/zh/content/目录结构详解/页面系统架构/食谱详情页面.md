# é£Ÿè°±è¯¦æƒ…é¡µé¢

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**
- [pages/recipe-detail/recipe-detail.js](file://pages/recipe-detail/recipe-detail.js)
- [pages/recipe-detail/recipe-detail.json](file://pages/recipe-detail/recipe-detail.json)
- [pages/recipe-detail/recipe-detail.wxml](file://pages/recipe-detail/recipe-detail.wxml)
- [pages/recipe-detail/recipe-detail.wxss](file://pages/recipe-detail/recipe-detail.wxss)
- [utils/recommend.js](file://utils/recommend.js)
- [data/recipes.json](file://data/recipes.json)
- [pages/recipe-list/recipe-list.js](file://pages/recipe-list/recipe-list.js)
- [app.json](file://app.json)
- [app.wxss](file://app.wxss)
- [data/diseases.json](file://data/diseases.json)
- [data/allergens.json](file://data/allergens.json)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
3. [æ ¸å¿ƒç»„ä»¶](#æ ¸å¿ƒç»„ä»¶)
4. [æ¶æ„æ¦‚è§ˆ](#æ¶æ„æ¦‚è§ˆ)
5. [è¯¦ç»†ç»„ä»¶åˆ†æ](#è¯¦ç»†ç»„ä»¶åˆ†æ)
6. [ä¾èµ–å…³ç³»åˆ†æ](#ä¾èµ–å…³ç³»åˆ†æ)
7. [æ€§èƒ½è€ƒè™‘](#æ€§èƒ½è€ƒè™‘)
8. [æ•…éšœæ’é™¤æŒ‡å—](#æ•…éšœæ’é™¤æŒ‡å—)
9. [ç»“è®º](#ç»“è®º)
10. [é™„å½•](#é™„å½•)

## ç®€ä»‹
æœ¬æ–‡ä»¶ä¸º Old-baby é¡¹ç›®ä¸­é£Ÿè°±è¯¦æƒ…é¡µé¢çš„è¯¦ç»†æŠ€æœ¯æ–‡æ¡£ã€‚é‡ç‚¹è§£æé£Ÿè°±è¯¦æƒ…å±•ç¤ºåŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š
- é£Ÿè°±åŸºæœ¬ä¿¡æ¯ï¼ˆåç§°ã€æè¿°ã€åˆ¶ä½œæ—¶é—´ã€éš¾åº¦ã€çƒ­é‡ï¼‰
- åˆ¶ä½œæ­¥éª¤ä¸åˆ†æ­¥è¯´æ˜
- è¥å…»æˆåˆ†ä¸ç‰¹åˆ«è¯´æ˜
- é€‚ç”¨ç–¾ç—…æ ‡ç­¾ä¸æ³¨æ„äº‹é¡¹
- æ•°æ®åŠ è½½æœºåˆ¶ã€å›¾ç‰‡å±•ç¤ºä¼˜åŒ–ã€ç”¨æˆ·äº¤äº’è®¾è®¡
- é¡µé¢æ•°æ®ç»“æ„ã€å¯Œæ–‡æœ¬æ¸²æŸ“ä¸å“åº”å¼å¸ƒå±€
- æ€§èƒ½ä¼˜åŒ–æŠ€å·§ä¸ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆ
- å®é™…æ¡ˆä¾‹ä¸å¼€å‘ç»éªŒåˆ†äº«

## é¡¹ç›®ç»“æ„
é£Ÿè°±è¯¦æƒ…é¡µé¢ä½äº pages/recipe-detail ç›®å½•ï¼Œé‡‡ç”¨æ ‡å‡†çš„ WXML + WXSS + JS æ¶æ„ï¼Œå¹¶é€šè¿‡ utils/recommend.js æä¾›æ•°æ®æ”¯æŒã€‚

```mermaid
graph TB
subgraph "é¡µé¢å±‚"
RD["pages/recipe-detail<br/>é£Ÿè°±è¯¦æƒ…é¡µé¢"]
RL["pages/recipe-list<br/>é£Ÿè°±åˆ—è¡¨é¡µé¢"]
end
subgraph "å·¥å…·å±‚"
REC["utils/recommend.js<br/>æ¨èä¸æŸ¥è¯¢"]
ST["utils/storage.js<br/>æœ¬åœ°å­˜å‚¨"]
UT["utils/util.js<br/>é€šç”¨å·¥å…·"]
end
subgraph "æ•°æ®å±‚"
RJSON["data/recipes.json<br/>é£Ÿè°±æ•°æ®"]
DJSON["data/diseases.json<br/>ç–¾ç—…æ•°æ®"]
AJSON["data/allergens.json<br/>è¿‡æ•åŸæ•°æ®"]
end
subgraph "åº”ç”¨é…ç½®"
APP["app.json<br/>åº”ç”¨é…ç½®"]
AX["app.wxss<br/>å…¨å±€æ ·å¼"]
end
RL --> RD
RD --> REC
REC --> RJSON
RL --> REC
RL --> ST
RD --> APP
RD --> AX
```

**å›¾è¡¨æ¥æº**
- [pages/recipe-detail/recipe-detail.js](file://pages/recipe-detail/recipe-detail.js#L1-L43)
- [pages/recipe-list/recipe-list.js](file://pages/recipe-list/recipe-list.js#L1-L129)
- [utils/recommend.js](file://utils/recommend.js#L1-L109)
- [data/recipes.json](file://data/recipes.json#L1-L515)
- [app.json](file://app.json#L1-L41)
- [app.wxss](file://app.wxss#L1-L224)

**ç« èŠ‚æ¥æº**
- [pages/recipe-detail/recipe-detail.js](file://pages/recipe-detail/recipe-detail.js#L1-L43)
- [pages/recipe-detail/recipe-detail.wxml](file://pages/recipe-detail/recipe-detail.wxml#L1-L154)
- [pages/recipe-detail/recipe-detail.wxss](file://pages/recipe-detail/recipe-detail.wxss#L1-L362)
- [utils/recommend.js](file://utils/recommend.js#L1-L109)
- [data/recipes.json](file://data/recipes.json#L1-L515)
- [pages/recipe-list/recipe-list.js](file://pages/recipe-list/recipe-list.js#L1-L129)
- [app.json](file://app.json#L1-L41)
- [app.wxss](file://app.wxss#L1-L224)

## æ ¸å¿ƒç»„ä»¶
- é¡µé¢æ§åˆ¶å™¨ï¼šè´Ÿè´£æ¥æ”¶è·¯ç”±å‚æ•°ã€åŠ è½½é£Ÿè°±è¯¦æƒ…ã€åˆ‡æ¢æ ‡ç­¾é¡µã€å¤„ç†åˆ†äº«ä¸æ”¶è—ç­‰äº¤äº’ã€‚
- è§†å›¾æ¨¡æ¿ï¼šWXML å±•ç¤ºå¤´éƒ¨å›¾ç‰‡ã€åŸºæœ¬ä¿¡æ¯å¡ç‰‡ã€é€‚ç”¨è¯´æ˜ã€æ ‡ç­¾é¡µå†…å®¹ï¼ˆé£Ÿææ¸…å•ã€åˆ¶ä½œæ­¥éª¤ã€è¥å…»è¯´æ˜ï¼‰ã€å°è´´å£«ä¸æ³¨æ„äº‹é¡¹ã€åº•éƒ¨æ“ä½œæ ã€‚
- æ ·å¼ç³»ç»Ÿï¼šWXSS æä¾›å¡ç‰‡ã€æ ‡ç­¾é¡µã€æ­¥éª¤åˆ—è¡¨ã€è¥å…»ç½‘æ ¼ã€æç¤ºæ¡ç›®ç­‰æ ·å¼ï¼Œå¹¶ä½¿ç”¨å…¨å±€ CSS å˜é‡ç»Ÿä¸€é…è‰²ã€‚
- æ•°æ®æºï¼šJSON æ–‡ä»¶æä¾›å®Œæ•´çš„é£Ÿè°±æ•°æ®ï¼ŒåŒ…å«é£Ÿæã€æ­¥éª¤ã€è¥å…»ã€å°è´´å£«ã€æ³¨æ„äº‹é¡¹ç­‰å­—æ®µã€‚
- æ¨èä¸æŸ¥è¯¢ï¼šrecommend.js æä¾›æ ¹æ®å® ç‰©å¥åº·çŠ¶å†µç­›é€‰é£Ÿè°±ã€æŒ‰ ID æŸ¥è¯¢è¯¦æƒ…ã€æŒ‰å…³é”®è¯æœç´¢ç­‰åŠŸèƒ½ã€‚

**ç« èŠ‚æ¥æº**
- [pages/recipe-detail/recipe-detail.js](file://pages/recipe-detail/recipe-detail.js#L4-L42)
- [pages/recipe-detail/recipe-detail.wxml](file://pages/recipe-detail/recipe-detail.wxml#L2-L154)
- [pages/recipe-detail/recipe-detail.wxss](file://pages/recipe-detail/recipe-detail.wxss#L3-L362)
- [utils/recommend.js](file://utils/recommend.js#L78-L80)
- [data/recipes.json](file://data/recipes.json#L1-L515)

## æ¶æ„æ¦‚è§ˆ
ä»é£Ÿè°±åˆ—è¡¨åˆ°è¯¦æƒ…é¡µçš„å¯¼èˆªæµç¨‹å¦‚ä¸‹ï¼š

```mermaid
sequenceDiagram
participant ç”¨æˆ· as "ç”¨æˆ·"
participant åˆ—è¡¨é¡µ as "recipe-list.js"
participant å¯¼èˆª as "wx.navigateTo"
participant è¯¦æƒ…é¡µ as "recipe-detail.js"
participant æ¨è as "recommend.js"
participant æ•°æ® as "recipes.json"
ç”¨æˆ·->>åˆ—è¡¨é¡µ : ç‚¹å‡»æŸä¸ªé£Ÿè°±å¡ç‰‡
åˆ—è¡¨é¡µ->>åˆ—è¡¨é¡µ : è·å– recipeId
åˆ—è¡¨é¡µ->>å¯¼èˆª : æ‰“å¼€è¯¦æƒ…é¡µ(å¸¦idå‚æ•°)
å¯¼èˆª-->>è¯¦æƒ…é¡µ : ä¼ é€’è·¯ç”±å‚æ•°{id}
è¯¦æƒ…é¡µ->>è¯¦æƒ…é¡µ : onLoad(options)
è¯¦æƒ…é¡µ->>æ¨è : getRecipeById(id)
æ¨è->>æ•°æ® : æŸ¥æ‰¾å¯¹åº”é£Ÿè°±
æ•°æ®-->>æ¨è : è¿”å›é£Ÿè°±å¯¹è±¡
æ¨è-->>è¯¦æƒ…é¡µ : è¿”å›é£Ÿè°±å¯¹è±¡
è¯¦æƒ…é¡µ->>è¯¦æƒ…é¡µ : setData({recipe})
è¯¦æƒ…é¡µ->>è¯¦æƒ…é¡µ : è®¾ç½®å¯¼èˆªæ æ ‡é¢˜
è¯¦æƒ…é¡µ-->>ç”¨æˆ· : æ¸²æŸ“é£Ÿè°±è¯¦æƒ…é¡µé¢
```

**å›¾è¡¨æ¥æº**
- [pages/recipe-list/recipe-list.js](file://pages/recipe-list/recipe-list.js#L112-L117)
- [pages/recipe-detail/recipe-detail.js](file://pages/recipe-detail/recipe-detail.js#L10-L18)
- [utils/recommend.js](file://utils/recommend.js#L78-L80)
- [data/recipes.json](file://data/recipes.json#L1-L515)

## è¯¦ç»†ç»„ä»¶åˆ†æ

### é¡µé¢æ•°æ®ç»“æ„ä¸å­—æ®µå®šä¹‰
é£Ÿè°±è¯¦æƒ…é¡µé¢çš„æ•°æ®æ¥æºäº JSON æ–‡ä»¶ï¼Œå­—æ®µè¦†ç›–åŸºæœ¬ä¿¡æ¯ã€åˆ¶ä½œæµç¨‹ã€è¥å…»ä¿¡æ¯ä¸é™„åŠ è¯´æ˜ã€‚å…³é”®å­—æ®µåŒ…æ‹¬ï¼š
- åŸºæœ¬ä¿¡æ¯ï¼šidã€nameã€descriptionã€imageã€prepTimeã€difficultyã€caloriesã€servings
- é€‚ç”¨ä¿¡æ¯ï¼šsuitableForï¼ˆé€‚ç”¨ç–¾ç—…åˆ—è¡¨ï¼‰ã€avoidForï¼ˆé¿å…é£Ÿæ/è¿‡æ•åŸï¼‰
- æˆåˆ†é…æ–¹ï¼šingredientsï¼ˆnameã€amountã€noteï¼‰
- åˆ¶ä½œæ­¥éª¤ï¼šstepsï¼ˆå­—ç¬¦ä¸²æ•°ç»„ï¼‰
- è¥å…»è¯´æ˜ï¼šnutritionï¼ˆproteinã€fatã€fiberã€specialï¼‰
- é™„åŠ æç¤ºï¼štipsã€warnings

```mermaid
erDiagram
RECIPE {
string id PK
string name
string description
string image
string prepTime
string difficulty
string calories
string servings
array suitableFor
array avoidFor
}
INGREDIENT {
string name
string amount
string note
}
NUTRITION {
string protein
string fat
string fiber
string special
}
RECIPE ||--o{ INGREDIENT : "åŒ…å«"
RECIPE ||--|| NUTRITION : "åŒ…å«"
```

**å›¾è¡¨æ¥æº**
- [data/recipes.json](file://data/recipes.json#L1-L515)

**ç« èŠ‚æ¥æº**
- [data/recipes.json](file://data/recipes.json#L1-L515)

### æ•°æ®åŠ è½½æœºåˆ¶
- è·¯ç”±å‚æ•°ï¼šè¯¦æƒ…é¡µé€šè¿‡ onLoad(options) æ¥æ”¶ id å‚æ•°ã€‚
- æŸ¥è¯¢é€»è¾‘ï¼šè°ƒç”¨ recommend.getRecipeById(options.id) è·å–é£Ÿè°±å¯¹è±¡ã€‚
- çŠ¶æ€æ›´æ–°ï¼šæˆåŠŸè·å–å setData({ recipe }) å¹¶è®¾ç½®å¯¼èˆªæ æ ‡é¢˜ã€‚
- é”™è¯¯å¤„ç†ï¼šè‹¥æœªä¼ å…¥ id æˆ–æœªæ‰¾åˆ°å¯¹åº”é£Ÿè°±ï¼Œé¡µé¢ä¿æŒåŠ è½½çŠ¶æ€ã€‚

```mermaid
flowchart TD
Start(["è¿›å…¥è¯¦æƒ…é¡µ"]) --> CheckId["æ£€æŸ¥è·¯ç”±å‚æ•°id"]
CheckId --> HasId{"æ˜¯å¦å­˜åœ¨id?"}
HasId --> |å¦| Loading["æ˜¾ç¤ºåŠ è½½çŠ¶æ€"]
HasId --> |æ˜¯| LoadData["è°ƒç”¨getRecipeById(id)"]
LoadData --> Found{"æ‰¾åˆ°é£Ÿè°±?"}
Found --> |å¦| Loading
Found --> |æ˜¯| SetData["setData({recipe})"]
SetData --> SetTitle["è®¾ç½®å¯¼èˆªæ æ ‡é¢˜"]
SetTitle --> Render["æ¸²æŸ“é¡µé¢"]
Loading --> End(["ç»“æŸ"])
Render --> End
```

**å›¾è¡¨æ¥æº**
- [pages/recipe-detail/recipe-detail.js](file://pages/recipe-detail/recipe-detail.js#L10-L18)
- [utils/recommend.js](file://utils/recommend.js#L78-L80)

**ç« èŠ‚æ¥æº**
- [pages/recipe-detail/recipe-detail.js](file://pages/recipe-detail/recipe-detail.js#L10-L18)
- [utils/recommend.js](file://utils/recommend.js#L78-L80)

### å›¾ç‰‡å±•ç¤ºä¼˜åŒ–
- å¤´å›¾åŒºåŸŸï¼šä½¿ç”¨ aspectFill æ¨¡å¼å¡«å……ï¼Œæä¾›å ä½ç¬¦ï¼ˆğŸ²ï¼‰ä»¥æå‡åŠ è½½ä½“éªŒã€‚
- åˆ—è¡¨ç¼©ç•¥å›¾ï¼šåŒæ ·é‡‡ç”¨ aspectFillï¼Œç¼ºå¤±æ—¶æ˜¾ç¤ºå ä½ç¬¦ã€‚
- å“åº”å¼é«˜åº¦ï¼šå¤´éƒ¨å›¾ç‰‡é«˜åº¦å›ºå®šä¸º 400rpxï¼Œé€‚é…ä¸åŒå±å¹•å°ºå¯¸ã€‚

```mermaid
graph LR
Header["å¤´éƒ¨å›¾ç‰‡å®¹å™¨<br/>400rpxé«˜åº¦"] --> Image["image ç»„ä»¶<br/>aspectFill"]
Image --> Placeholder["å ä½ç¬¦ ğŸ²"]
ListThumb["åˆ—è¡¨ç¼©ç•¥å›¾"] --> ListImage["image ç»„ä»¶<br/>aspectFill"]
ListImage --> ListPlaceholder["å ä½ç¬¦ ğŸ²"]
```

**å›¾è¡¨æ¥æº**
- [pages/recipe-detail/recipe-detail.wxml](file://pages/recipe-detail/recipe-detail.wxml#L4-L11)
- [pages/recipe-list/recipe-list.wxml](file://pages/recipe-list/recipe-list.wxml#L54-L62)

**ç« èŠ‚æ¥æº**
- [pages/recipe-detail/recipe-detail.wxml](file://pages/recipe-detail/recipe-detail.wxml#L4-L11)
- [pages/recipe-detail/recipe-detail.wxss](file://pages/recipe-detail/recipe-detail.wxss#L9-L29)
- [pages/recipe-list/recipe-list.wxml](file://pages/recipe-list/recipe-list.wxml#L54-L62)

### ç”¨æˆ·äº¤äº’è®¾è®¡
- æ ‡ç­¾é¡µåˆ‡æ¢ï¼šç‚¹å‡»â€œé£Ÿææ¸…å•â€â€œåˆ¶ä½œæ­¥éª¤â€â€œè¥å…»è¯´æ˜â€ï¼Œåˆ‡æ¢ activeTab æ§åˆ¶å†…å®¹æ˜¾ç¤ºã€‚
- åˆ†äº«åŠŸèƒ½ï¼šonShareAppMessage è¿”å›æ ‡é¢˜ä¸è·¯å¾„ï¼Œæ”¯æŒè½¬å‘åˆ°å¾®ä¿¡ã€‚
- æ”¶è—åŠŸèƒ½ï¼šé¢„ç•™ onCollectï¼Œå½“å‰æç¤ºâ€œå¼€å‘ä¸­â€ã€‚

```mermaid
sequenceDiagram
participant ç”¨æˆ· as "ç”¨æˆ·"
participant è¯¦æƒ…é¡µ as "recipe-detail.js"
participant è§†å›¾ as "recipe-detail.wxml"
ç”¨æˆ·->>è§†å›¾ : ç‚¹å‡»æ ‡ç­¾é¡µ
è§†å›¾->>è¯¦æƒ…é¡µ : onTabChange(e)
è¯¦æƒ…é¡µ->>è¯¦æƒ…é¡µ : setData({activeTab})
è¯¦æƒ…é¡µ-->>è§†å›¾ : è§¦å‘WXMLé‡æ–°æ¸²æŸ“
è§†å›¾-->>ç”¨æˆ· : åˆ‡æ¢æ˜¾ç¤ºå¯¹åº”å†…å®¹
ç”¨æˆ·->>è¯¦æƒ…é¡µ : ç‚¹å‡»åˆ†äº«æŒ‰é’®
è¯¦æƒ…é¡µ->>è¯¦æƒ…é¡µ : onShareAppMessage()
è¯¦æƒ…é¡µ-->>ç”¨æˆ· : å¼¹å‡ºåˆ†äº«èœå•
ç”¨æˆ·->>è¯¦æƒ…é¡µ : ç‚¹å‡»æ”¶è—æŒ‰é’®
è¯¦æƒ…é¡µ->>è¯¦æƒ…é¡µ : onCollect()
è¯¦æƒ…é¡µ-->>ç”¨æˆ· : Toastæç¤ºâ€œå¼€å‘ä¸­â€
```

**å›¾è¡¨æ¥æº**
- [pages/recipe-detail/recipe-detail.js](file://pages/recipe-detail/recipe-detail.js#L21-L41)
- [pages/recipe-detail/recipe-detail.wxml](file://pages/recipe-detail/recipe-detail.wxml#L44-L61)

**ç« èŠ‚æ¥æº**
- [pages/recipe-detail/recipe-detail.js](file://pages/recipe-detail/recipe-detail.js#L21-L41)
- [pages/recipe-detail/recipe-detail.wxml](file://pages/recipe-detail/recipe-detail.wxml#L44-L61)

### å†…å®¹æ¸²æŸ“ä¸å¯Œæ–‡æœ¬å¤„ç†
- é£Ÿææ¸…å•ï¼šéå† ingredientsï¼Œæ˜¾ç¤º nameã€amount ä¸ noteï¼›åº•éƒ¨æ˜¾ç¤º servings è¯´æ˜ã€‚
- åˆ¶ä½œæ­¥éª¤ï¼šéå† stepsï¼Œæ˜¾ç¤ºåºå·ä¸å†…å®¹ï¼Œåºå·é‡‡ç”¨åœ†è§’èƒŒæ™¯ä¸æ¸å˜è‰²ã€‚
- è¥å…»è¯´æ˜ï¼šä¸‰åˆ—ç½‘æ ¼å±•ç¤ºè›‹ç™½è´¨ã€è„‚è‚ªã€çº¤ç»´ï¼›special å­—æ®µä½œä¸ºç‰¹åˆ«è¯´æ˜åŒºå—ã€‚
- å°è´´å£«ä¸æ³¨æ„äº‹é¡¹ï¼šåˆ—è¡¨å½¢å¼ï¼Œåˆ†åˆ«ä½¿ç”¨ä¸åŒå›¾æ ‡ä¸é¢œè‰²æ ‡è¯†ã€‚

```mermaid
flowchart TD
Ingredients["é£Ÿææ¸…å•æ¸²æŸ“"] --> LoopIng["éå†ingredients"]
LoopIng --> Item["æ˜¾ç¤ºname/amount/note"]
Steps["åˆ¶ä½œæ­¥éª¤æ¸²æŸ“"] --> LoopStep["éå†steps"]
LoopStep --> StepItem["æ˜¾ç¤ºåºå·+å†…å®¹"]
Nutrition["è¥å…»è¯´æ˜æ¸²æŸ“"] --> Grid["ä¸‰åˆ—ç½‘æ ¼"]
Grid --> Protein["è›‹ç™½è´¨"]
Grid --> Fat["è„‚è‚ª"]
Grid --> Fiber["çº¤ç»´"]
Grid --> Special["ç‰¹åˆ«è¯´æ˜"]
Tips["å°è´´å£«æ¸²æŸ“"] --> TipList["éå†tips"]
Warnings["æ³¨æ„äº‹é¡¹æ¸²æŸ“"] --> WarnList["éå†warnings"]
```

**å›¾è¡¨æ¥æº**
- [pages/recipe-detail/recipe-detail.wxml](file://pages/recipe-detail/recipe-detail.wxml#L63-L135)
- [pages/recipe-detail/recipe-detail.wxss](file://pages/recipe-detail/recipe-detail.wxss#L136-L313)

**ç« èŠ‚æ¥æº**
- [pages/recipe-detail/recipe-detail.wxml](file://pages/recipe-detail/recipe-detail.wxml#L63-L135)
- [pages/recipe-detail/recipe-detail.wxss](file://pages/recipe-detail/recipe-detail.wxss#L136-L313)

### é€‚ç”¨ç–¾ç—…ä¸è¿‡æ•åŸå…³è”
- é€‚ç”¨è¯´æ˜ï¼šsuitableFor ä¸ avoidFor å­—æ®µç”¨äºè¡¨è¾¾é£Ÿè°±çš„é€‚ç”¨ä¸ç¦å¿Œã€‚
- ç–¾ç—…æ•°æ®ï¼šdiseases.json æä¾›ç–¾ç—…åˆ†ç±»ä¸æè¿°ï¼Œä¾¿äºå‰ç«¯å±•ç¤ºä¸ç­›é€‰ã€‚
- è¿‡æ•åŸæ•°æ®ï¼šallergens.json æä¾›è¿‡æ•åŸåˆ—è¡¨ï¼Œä¸ avoidFor å¯¹åº”ã€‚

```mermaid
graph TB
Recipe["é£Ÿè°±å¯¹è±¡"] --> Suitable["suitableFor<br/>é€‚ç”¨ç–¾ç—…åˆ—è¡¨"]
Recipe --> Avoid["avoidFor<br/>é¿å…é£Ÿæ/è¿‡æ•åŸ"]
Diseases["diseases.json"] --> Display["ç–¾ç—…å±•ç¤º"]
Allergens["allergens.json"] --> Match["è¿‡æ•åŸåŒ¹é…"]
Recommend["recommend.js"] --> Score["è¯„åˆ†ä¸è¿‡æ»¤"]
Score --> Filter["è¿‡æ»¤å«è¿‡æ•åŸé£Ÿè°±"]
```

**å›¾è¡¨æ¥æº**
- [utils/recommend.js](file://utils/recommend.js#L18-L66)
- [data/diseases.json](file://data/diseases.json#L1-L108)
- [data/allergens.json](file://data/allergens.json#L1-L15)

**ç« èŠ‚æ¥æº**
- [utils/recommend.js](file://utils/recommend.js#L18-L66)
- [data/diseases.json](file://data/diseases.json#L1-L108)
- [data/allergens.json](file://data/allergens.json#L1-L15)

### å“åº”å¼å¸ƒå±€ä¸ç§»åŠ¨ç«¯é€‚é…
- ä½¿ç”¨ rpx å•ä½ï¼šé¡µé¢æ•´ä½“é‡‡ç”¨ rpxï¼Œç¡®ä¿åœ¨ä¸åŒè®¾å¤‡ä¸Šä¿æŒä¸€è‡´æ¯”ä¾‹ã€‚
- å›ºå®šåº•éƒ¨æ“ä½œæ ï¼šä½¿ç”¨ fixed å®šä½ä¸ safe-bottom ç±»ï¼Œé€‚é…åˆ˜æµ·å±å®‰å…¨åŒºåŸŸã€‚
- å¡ç‰‡ä¸é˜´å½±ï¼šå…¨å±€ card ç±»æä¾›åœ†è§’ä¸é˜´å½±ï¼Œæå‡å±‚çº§æ„Ÿã€‚
- å¯¼èˆªæ ä¸ä¸»é¢˜è‰²ï¼šapp.wxss å®šä¹‰è‡ªç„¶æ£®ç³»é…è‰²å˜é‡ï¼Œç»Ÿä¸€é£æ ¼ã€‚

```mermaid
graph LR
Rpx["rpxå•ä½"] --> Layout["è‡ªé€‚åº”å¸ƒå±€"]
FixedBar["fixedåº•éƒ¨æ“ä½œæ "] --> SafeArea["safe-area-inset-bottom"]
Card["cardå¡ç‰‡"] --> Shadow["é˜´å½±ä¸åœ†è§’"]
Theme["CSSå˜é‡"] --> Consistent["ç»Ÿä¸€é…è‰²"]
```

**å›¾è¡¨æ¥æº**
- [pages/recipe-detail/recipe-detail.wxss](file://pages/recipe-detail/recipe-detail.wxss#L315-L353)
- [app.wxss](file://app.wxss#L3-L23)

**ç« èŠ‚æ¥æº**
- [pages/recipe-detail/recipe-detail.wxss](file://pages/recipe-detail/recipe-detail.wxss#L315-L353)
- [app.wxss](file://app.wxss#L3-L23)

## ä¾èµ–å…³ç³»åˆ†æ
- é¡µé¢ä¾èµ–ï¼šrecipe-detail ä¾èµ– recommend.js æä¾›æ•°æ®æŸ¥è¯¢èƒ½åŠ›ï¼›é€šè¿‡è·¯ç”±å‚æ•°ä¸ setData æ¸²æŸ“è§†å›¾ã€‚
- æ•°æ®ä¾èµ–ï¼šrecommend.js ä¾èµ– data/recipes.jsonï¼›åŒæ—¶åœ¨ recipe-list ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚
- æ ·å¼ä¾èµ–ï¼šé¡µé¢æ ·å¼ä¾èµ– app.wxss çš„å…¨å±€å˜é‡ä¸é€šç”¨ç±»åã€‚
- å¯¼èˆªä¾èµ–ï¼šrecipe-list.js è´Ÿè´£å°†ç”¨æˆ·å¼•å¯¼è‡³ recipe-detailï¼Œå¹¶ä¼ é€’ id å‚æ•°ã€‚

```mermaid
graph TB
RD["recipe-detail.js"] --> REC["recommend.js"]
REC --> RJSON["recipes.json"]
RD --> APP["app.json"]
RD --> AX["app.wxss"]
RL["recipe-list.js"] --> RD
RL --> REC
```

**å›¾è¡¨æ¥æº**
- [pages/recipe-detail/recipe-detail.js](file://pages/recipe-detail/recipe-detail.js#L1-L43)
- [utils/recommend.js](file://utils/recommend.js#L1-L109)
- [data/recipes.json](file://data/recipes.json#L1-L515)
- [pages/recipe-list/recipe-list.js](file://pages/recipe-list/recipe-list.js#L1-L129)
- [app.json](file://app.json#L1-L41)
- [app.wxss](file://app.wxss#L1-L224)

**ç« èŠ‚æ¥æº**
- [pages/recipe-detail/recipe-detail.js](file://pages/recipe-detail/recipe-detail.js#L1-L43)
- [utils/recommend.js](file://utils/recommend.js#L1-L109)
- [data/recipes.json](file://data/recipes.json#L1-L515)
- [pages/recipe-list/recipe-list.js](file://pages/recipe-list/recipe-list.js#L1-L129)
- [app.json](file://app.json#L1-L41)
- [app.wxss](file://app.wxss#L1-L224)

## æ€§èƒ½è€ƒè™‘
- æ•°æ®åŠ è½½ä¼˜åŒ–
  - é¢„åŠ è½½ç­–ç•¥ï¼šåœ¨ recipe-list ä¸­å·²å°†æ¨èç»“æœç¼“å­˜åˆ°å†…å­˜ï¼Œè¯¦æƒ…é¡µç›´æ¥é€šè¿‡ ID æŸ¥è¯¢ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚
  - æœ¬åœ°æ•°æ®ï¼šrecipes.json ä½œä¸ºé™æ€èµ„æºï¼Œå‡å°‘ç½‘ç»œè¯·æ±‚å¼€é”€ã€‚
- æ¸²æŸ“ä¼˜åŒ–
  - æ¡ä»¶æ¸²æŸ“ï¼šä½¿ç”¨ wx:if æ§åˆ¶å†…å®¹æ˜¾ç¤ºï¼Œå‡å°‘ä¸å¿…è¦çš„èŠ‚ç‚¹ã€‚
  - åˆ—è¡¨æ¸²æŸ“ï¼šä½¿ç”¨ wx:for + wx:keyï¼Œæå‡åˆ—è¡¨æ›´æ–°æ•ˆç‡ã€‚
- å›¾ç‰‡ä¼˜åŒ–
  - å ä½ç¬¦ï¼šæ— å›¾æ—¶æ˜¾ç¤ºå ä½ç¬¦ï¼Œé¿å…ç©ºç™½å¸¦æ¥çš„è§†è§‰è·³å˜ã€‚
  - aspectFillï¼šç»Ÿä¸€å›¾ç‰‡å¡«å……æ¨¡å¼ï¼Œå‡å°‘é‡æ’ã€‚
- äº¤äº’ä¼˜åŒ–
  - åˆ†äº«ä¸æ”¶è—ï¼šä½¿ç”¨åŸç”Ÿç»„ä»¶ä¸äº‹ä»¶ç»‘å®šï¼Œé™ä½è‡ªå®šä¹‰å¤æ‚åº¦ã€‚
  - åº•éƒ¨å›ºå®šæ ï¼šä½¿ç”¨ fixed å®šä½ï¼Œé¿å…æ»šåŠ¨æ—¶é‡å¤æ¸²æŸ“ã€‚

[æœ¬èŠ‚ä¸ºé€šç”¨æ€§èƒ½å»ºè®®ï¼Œæ— éœ€ç‰¹å®šæ–‡ä»¶å¼•ç”¨]

## æ•…éšœæ’é™¤æŒ‡å—
- æ— æ³•æ˜¾ç¤ºé£Ÿè°±è¯¦æƒ…
  - æ£€æŸ¥è·¯ç”±å‚æ•° id æ˜¯å¦æ­£ç¡®ä¼ é€’ï¼ˆrecipe-list.js ä¸­çš„ navigateToï¼‰ã€‚
  - ç¡®è®¤ recommend.getRecipeById è¿”å›éç©ºå¯¹è±¡ã€‚
- å›¾ç‰‡ä¸æ˜¾ç¤º
  - æ£€æŸ¥ image å­—æ®µè·¯å¾„æ˜¯å¦æœ‰æ•ˆï¼›æ— å›¾æ—¶æ˜¾ç¤ºå ä½ç¬¦ã€‚
  - ç¡®è®¤ mode="aspectFill" é…ç½®æ­£ç¡®ã€‚
- æ ‡ç­¾é¡µåˆ‡æ¢æ— æ•ˆ
  - æ£€æŸ¥ activeTab çŠ¶æ€æ˜¯å¦æ›´æ–°ï¼›ç¡®è®¤ WXML ä¸­çš„ wx:if æ¡ä»¶æ­£ç¡®ã€‚
- åˆ†äº«/æ”¶è—åŠŸèƒ½å¼‚å¸¸
  - åˆ†äº«ï¼šç¡®è®¤ onShareAppMessage è¿”å›å€¼æ­£ç¡®ã€‚
  - æ”¶è—ï¼šå½“å‰ä»…æç¤ºâ€œå¼€å‘ä¸­â€ï¼Œåç»­å¯æ¥å…¥æœ¬åœ°æ”¶è—æˆ–äº‘å­˜å‚¨ã€‚

**ç« èŠ‚æ¥æº**
- [pages/recipe-list/recipe-list.js](file://pages/recipe-list/recipe-list.js#L112-L117)
- [utils/recommend.js](file://utils/recommend.js#L78-L80)
- [pages/recipe-detail/recipe-detail.js](file://pages/recipe-detail/recipe-detail.js#L27-L41)
- [pages/recipe-detail/recipe-detail.wxml](file://pages/recipe-detail/recipe-detail.wxml#L4-L11)

## ç»“è®º
é£Ÿè°±è¯¦æƒ…é¡µé¢é€šè¿‡æ¸…æ™°çš„æ•°æ®ç»“æ„ã€ç®€æ´çš„è§†å›¾æ¨¡æ¿ä¸ç¨³å®šçš„æ¨èæŸ¥è¯¢æœºåˆ¶ï¼Œå®ç°äº†å¯¹è€å¹´çŠ¬é£Ÿè°±çš„å®Œæ•´å±•ç¤ºã€‚é¡µé¢é‡‡ç”¨ rpx å“åº”å¼å¸ƒå±€ä¸ç»Ÿä¸€ä¸»é¢˜è‰²ï¼Œå…·å¤‡è‰¯å¥½çš„ç§»åŠ¨ç«¯é€‚é…èƒ½åŠ›ã€‚æœªæ¥å¯åœ¨æ”¶è—åŠŸèƒ½ã€å¯Œæ–‡æœ¬æ¸²æŸ“ä¸å›¾ç‰‡æ‡’åŠ è½½ç­‰æ–¹é¢è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œä»¥æå‡ç”¨æˆ·ä½“éªŒä¸æ€§èƒ½è¡¨ç°ã€‚

[æœ¬èŠ‚ä¸ºæ€»ç»“æ€§å†…å®¹ï¼Œæ— éœ€ç‰¹å®šæ–‡ä»¶å¼•ç”¨]

## é™„å½•

### å¼€å‘ç»éªŒåˆ†äº«
- æ•°æ®é©±åŠ¨ï¼šå°†é£Ÿè°±æ•°æ®é›†ä¸­ç®¡ç†äº JSON æ–‡ä»¶ï¼Œä¾¿äºç»´æŠ¤ä¸æ‰©å±•ã€‚
- ç»„ä»¶åŒ–æ€ç»´ï¼šå°†å¸¸ç”¨ UI ç»“æ„æŠ½è±¡ä¸ºé€šç”¨ç±»åï¼ˆå¦‚ cardã€tagï¼‰ï¼Œæå‡å¤ç”¨æ€§ã€‚
- äº¤äº’ä¸€è‡´æ€§ï¼šæ ‡ç­¾é¡µåˆ‡æ¢ã€åˆ†äº«ä¸æ”¶è—ç­‰äº¤äº’å°½é‡éµå¾ªå¾®ä¿¡å°ç¨‹åºè§„èŒƒï¼Œé™ä½å­¦ä¹ æˆæœ¬ã€‚
- å¯è®¿é—®æ€§ï¼šä¸ºå›¾ç‰‡æä¾›å ä½ç¬¦ï¼Œä¸ºåˆ—è¡¨é¡¹æä¾›é”®å€¼ï¼Œæå‡å¯è¯»æ€§ä¸å¯ç»´æŠ¤æ€§ã€‚

[æœ¬èŠ‚ä¸ºç»éªŒæ€»ç»“ï¼Œæ— éœ€ç‰¹å®šæ–‡ä»¶å¼•ç”¨]